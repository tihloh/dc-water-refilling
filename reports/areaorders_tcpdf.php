<?php 	 $tdate=$_GET["tdate"]??""; $area=$_GET["area"]??""; $q=$_GET["q"]??""; 	 class MYPDF extends TCPDF{ 	function BasicTable(){ 		Global $mysqli, $tdate, $area, $q;	  		$this->SetFont('helvetica','B',11); 		$this->Cell(250,10,"DC Water Refilling Station",0,0,'C'); 		$this->Ln(5); 		$this->Cell(250,10,$area,0,0,'C'); 		$this->Ln(5); 		$this->Cell(250,10,"$tdate",0,0,'C'); 		$this->Ln();  		$this->SetFont('helvetica','B',9); 		$this->Cell(40,6,"Customer","LTR",0,""); 		$this->Cell(50,6,"Address","LTR",0,""); 		$this->Cell(25,6,"Contact #","LTR",0,""); 		$this->Cell(115,6,"Orders","LTR",0,""); 		$this->Cell(25,6,"Total Amount","LTR",0,"C"); 		$this->Ln(); 		 		$q="SELECT *,o.id oid FROM tblorders o INNER JOIN 			(SELECT GROUP_CONCAT(' ',oi.qty,' ',item) details, orderid FROM tblorder_items oi INNER JOIN tblitems i ON oi.itemid=i.id WHERE fromsched=0 GROUP BY orderid) oi ON oi.orderid=o.id 			WHERE o.addr='$area' and date(time)='$tdate' and cancelled=0 ORDER BY time desc"; 		$result = $mysqli->query($q); 		$this->SetFont('helvetica','',9); 		$no=0; $total=0; 		while ($row = $result->fetch_assoc()){ 			$this->Cell(40,6,$row['customer'],1,0,""); 			$this->Cell(50,6,$row['addr'],1,0,""); 			$this->Cell(25,6,$row['cp'],1,0,""); 			$this->Cell(115,6,shorttext($row['details'],120),1,0,""); 			$this->Cell(25,6,formatnum($row['charge']),1,0,"R"); 			$this->Ln(); 			$total +=$row['charge']; 		} 		$result->free(); 		 		$this->SetFont('helvetica','B',9); 		$this->Cell(230,6,"TOTAL",0,0,"R"); 		$this->Cell(25,6,formatnum($total),1,0,"R"); 		$this->Ln(); 	} }  $pdf = new MYPDF("P", PDF_UNIT, "LETTER", true, 'UTF-8', false); $pdf->setPrintHeader(false); $pdf->setPrintFooter(false); $pdf->SetAutoPageBreak(true,7.8); $pdf->SetDisplayMode('real'); $pdf->SetMargins(PDF_MARGIN_LEFT, 10, PDF_MARGIN_RIGHT); $pdf->SetFont('helvetica','',11); $pdf->SetTitle('Sales Report'); $pdf->AddPage('L'); $pdf->BasicTable(); $pdf->Output(); ?>